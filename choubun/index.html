<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACCELTYPING 長文練習</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Roboto+Mono&display=swap" rel="stylesheet">
</head>
<body>
    <!-- ホームボタン -->
    <a href="../index.html" class="home-button">
        <span class="home-icon">🏠</span>
        <span class="home-text">HOME</span>
    </a>

    <div class="container">
        <header>
            <h1>長文練習</h1>
            <p>acceltyping</p>
        </header>

        <section class="controls">
            <div class="control-group">
                <div class="mode-selector">
                    <button id="mode-random" class="btn-mode active">ランダム</button>
                    <button id="mode-select" class="btn-mode">課題選択</button>
                </div>
                
                <select id="problem-dropdown" class="problem-dropdown" style="display: none;">
                    <!-- JSで生成 -->
                </select>

                <button id="start-btn" class="btn-primary">スタート</button>
                <button id="finish-btn" class="btn-danger" disabled>終了</button>
            </div>
            <div class="control-group">
                <div id="timer" class="timer">10:00</div>
                <button id="reset-btn" class="btn-secondary">リセット</button>
                <button id="show-grades-btn" class="btn-info">判定基準一覧</button>
            </div>
        </section>

        <main class="main-content">
            <div class="problem-box">
                <div class="problem-header">課題文</div>
                <div id="problem-text">スタートボタンを押すとランダムに問題が出題されます。</div>
            </div>
            <div class="input-box">
                <div class="input-header">
                    <span>入力エリア</span>
                    <span id="char-count">文字数: 0</span>
                </div>
                <textarea id="input-area" placeholder="ここに課題文をタイピングしてください..." disabled></textarea>
            </div>
        </main>
    </div>

    <!-- 結果モーダル -->
    <div id="result-modal" class="modal">
        <div class="modal-content">
            <h2>結果発表</h2>
            <div id="result-details"></div>
            <button id="close-modal" class="btn-primary">閉じる</button>
        </div>
    </div>

    <!-- 判定基準モーダル (最初のコードと同一) -->
    <div id="grading-modal" class="modal">
        <div class="modal-content grading-table-container">
            <h2>判定基準一覧</h2>
            <div class="grading-tables">
                <div class="grading-section">
                    <h3>🏆 公式級 (日本語ワープロ検定)</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>級</th>
                                <th>基準文字数</th>
                                <th>ミス減点</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>初段</td><td>800~</td><td>-5</td></tr>
                            <tr><td>1級</td><td>700~799</td><td>-5</td></tr>
                            <tr><td>準1級</td><td>600~699</td><td>-5</td></tr>
                            <tr><td>2級</td><td>500~599</td><td>-3</td></tr>
                            <tr><td>準2級</td><td>400~499</td><td>-3</td></tr>
                            <tr><td>3級</td><td>300~399</td><td>-1</td></tr>
                            <tr><td>4級</td><td>200~299</td><td>-1</td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="grading-section custom-ranks">
                    <h3>⭐ 段位</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>段位</th>
                                <th>基準文字数</th>
                                <th>ミス減点</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="high-rank"><td>十段</td><td>3000~</td><td>-5</td></tr>
                            <tr class="high-rank"><td>九段</td><td>2750~2999</td><td>-5</td></tr>
                            <tr><td>八段</td><td>2500~2749</td><td>-5</td></tr>
                            <tr><td>七段</td><td>2250~2499</td><td>-5</td></tr>
                            <tr><td>六段</td><td>2000~2249</td><td>-5</td></tr>
                            <tr><td>五段</td><td>1750~1999</td><td>-5</td></tr>
                            <tr><td>四段</td><td>1500~1749</td><td>-5</td></tr>
                            <tr><td>三段</td><td>1250~1499</td><td>-5</td></tr>
                            <tr><td>二段</td><td>1000~1249</td><td>-5</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <button id="close-grading-modal" class="btn-primary" style="margin-top:20px;">閉じる</button>
        </div>
    </div>

    <footer class="shortcuts-help">
        <small>ショートカット: [Space] スタート / [Shift + Space] 終了 / [Esc] リセット</small>
    </footer>

    <script src="problems.js"></script>
    <script src="script.js"></script>
</body>
</html>
